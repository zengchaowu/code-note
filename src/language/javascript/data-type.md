# 数据类型

## 弱类型

js 是一门弱类型语言，变量的类型很多时候会自动进行转换。弱类型语言通常有两个特点：

**隐式类型转换**

隐式类型转换指的是在运行时，编程语言会自动将变量的类型转换为需要的类型，而不需要显式地进行类型转换。

具体来说，当程序需要对一个变量进行操作时，它会检查该变量的数据类型，并根据需要将其转换为正确的类型。

例如，在 JavaScript 中，如果需要将一个字符串与一个数字相加，程序会自动将数字转换为字符串，然后进行连接操作，相减则会将字符串类型转换成数字进行计算。

常见的几种转换场景为：

1. 数字和字符串相互转换，谁被转换和操作符有关。
2. bool 与数字之间转换。对应 0 和 1
3. 对象转换为原始值：当 JavaScript 需要将对象转换为原始值（例如在进行加法运算时），会调用对象的 valueOf 和 toString 方法来获取原始值。如果对象同时定义了 valueOf 和 toString 方法，valueOf 方法的优先级更高。

**动态类型**

动态类型指的是在运行时，变量的类型可以发生变化，而不需要提前声明或确定。

动态类型的实现方式通常基于解释器或运行时环境。在编译时，编程语言并不需要确定变量的类型，而是将其保存为一个通用的值。然后，在运行时，解释器会根据需要对变量进行类型转换。

在 JavaScript 中，动态类型的实现是基于值的类型而非变量的类型。这意味着变量的类型可以随着它所引用的值的类型的改变而改变。由于 JavaScript 中的变量是以引用的方式来保存值的，因此可以将一个变量赋值给另一个变量，这样它们就引用了同一个值。这种引用关系可以使多个变量引用同一个值，从而实现动态类型。

## 基本数据类型

在编程语言中，基本数据类型区分于其他组合类型，例如数组、结构体、对象等。其数据直接存储在其变量所占用空间中，对基本数据类型的赋值等操作通常是值传递。

在 js 中，基本数据类型的范围与 c 和 java 中不同，通常只是用于区分于引用数据类型，基本数据类型不存在方法和属性。

js 存在如下基本类型：

boolean、null、undefined、number、bigint、string、symbol

**js 部分类型的特点**

1. NaN 与任何值（包括它自己）都不相等。
2. typeof(null)为 object，所以 null 其实是一个空对象指针。
3. bigint 只能存储整数，并且其在标准上不设上下范围，通常由可变长数组结构实现，但是其仍然是一个基本数据类型，在内存中被存储为原始值。
4. Symbol 表示一种独一无二的标识符，用于对象属性的键名或者其他需要唯一标识的场景。每个 Symbol 值都是唯一的，即使是使用相同的描述符创建的 Symbol 值也是不同的。Symbol 可以作为对象属性的键名，用于表示不同的属性，避免命名冲突。或者用来创建私有属性和方法，因为 Symbol 是独一无二的，不会与其他属性冲突，也不会被意外覆盖。

## 包装类型

由于基本数据类型不存在原型，所以基本类型也就无法执行方法。但为什么`'123'.length`可以执行呢。

### 自动装箱与拆箱

这个概念与 java 类似，但是 js 中并不是所有基本类型都有对应的包装类。

常用的基本类型都有对应的包装类，Boolean、Number、String。包装类一般提供一个构造函数，可以将基本数据类型转换为包装类对象。但是我们上面的代码并没有手动生成包装类，而是由 js 引擎生成的。

其基本执行原则是，当尝试调用基本类型的方法和属性时，会自动创建一个包装类，再调用这个包装类的属性和方法。在包装类与基本类型发生计算时，会将包装类自动拆箱为基本数据类型再参与运算。

## 引用数据类型

引用数据类型，变量所在的内存区域存储的只是一个指向原始值的引用，其原始值存在于内存的堆区。

**值复制**

在对变量进行赋值时，通常会发生值复制，也就是将之前变量所在内存区域的值复制到新变量所在内存区域。在对引用数据类型进行值复制时，由于其复制的只是一个引用，所以相当于有多个变量指向同一个 在堆区中的原始值。
